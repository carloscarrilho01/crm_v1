const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kanban-B3zvhY4Q.js","assets/vendor-react-r6j4PRy1.js","assets/chat-BwvnMRRy.js","assets/vendor-date-DJxzBke1.js","assets/chat-Dh5auv5d.css","assets/kanban-CCqT-ckM.css","assets/analytics-C6gnzPUs.js","assets/analytics-C0QoddMu.css","assets/stock-C8RUvQpR.js","assets/vendor-supabase-86zPEKbB.js","assets/stock-CTsHjE5R.css","assets/service-orders-Bxl19OdH.js","assets/service-orders-Bc5msOaO.css"])))=>i.map(i=>d[i]);
import{a as e,r as s,j as a,R as t}from"./vendor-react-r6j4PRy1.js";import{s as n,u as l,A as i}from"./stock-C8RUvQpR.js";import{A as r,f as o,C as c,L as d,a as h}from"./chat-BwvnMRRy.js";import{l as u}from"./vendor-socket-uWFJOQLW.js";import"./vendor-supabase-86zPEKbB.js";import"./vendor-date-DJxzBke1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var m={},C=e;m.createRoot=C.createRoot,m.hydrateRoot=C.hydrateRoot;const x={},v=function(e,s,a){let t=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");t=Promise.allSettled(s.map(e=>{if((e=function(e){return"/"+e}(e))in x)return;x[e]=!0;const s=e.endsWith(".css"),t=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const n=document.createElement("link");return n.rel=s?"stylesheet":"modulepreload",s||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),s?new Promise((s,a)=>{n.addEventListener("load",s),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return t.then(s=>{for(const e of s||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};let j=null;const g=new Map,p=(e,s)=>{if(!g.has(s)){const a=e();return g.set(s,a),a}return g.get(s)};function b({onLogin:e}){const[t,l]=s.useState(""),[i,r]=s.useState(""),[o,c]=s.useState(!1),[d,h]=s.useState(null);return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-box",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",className:"login-icon",children:a.jsx("path",{fill:"currentColor",d:"M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67M8.53 7.33C8.37 7.33 8.1 7.39 7.87 7.64C7.65 7.89 7 8.5 7 9.71C7 10.93 7.89 12.1 8 12.27C8.14 12.44 9.76 14.94 12.25 16C12.84 16.27 13.3 16.42 13.66 16.53C14.25 16.72 14.79 16.69 15.22 16.63C15.7 16.56 16.68 16.03 16.89 15.45C17.1 14.87 17.1 14.38 17.04 14.27C16.97 14.17 16.81 14.11 16.56 14C16.31 13.86 15.09 13.26 14.87 13.18C14.64 13.1 14.5 13.06 14.31 13.3C14.15 13.55 13.67 14.11 13.53 14.27C13.38 14.44 13.24 14.46 13 14.34C12.74 14.21 11.94 13.95 11 13.11C10.26 12.45 9.77 11.64 9.62 11.39C9.5 11.15 9.61 11 9.73 10.89C9.84 10.78 10 10.6 10.1 10.45C10.23 10.31 10.27 10.2 10.35 10.04C10.43 9.87 10.39 9.73 10.33 9.61C10.27 9.5 9.77 8.26 9.56 7.77C9.36 7.29 9.16 7.35 9 7.34C8.86 7.34 8.7 7.33 8.53 7.33Z"})}),a.jsx("h1",{children:"IA Conversa"}),a.jsx("p",{children:"Faça login para acessar o painel"})]}),a.jsxs("form",{onSubmit:async s=>{s.preventDefault(),c(!0),h(null);try{const{data:s,error:a}=await n.auth.signInWithPassword({email:t,password:i});if(a)throw a;e(s.user)}catch(a){h(a.message)}finally{c(!1)}},className:"login-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Email"}),a.jsx("input",{type:"email",placeholder:"seu@email.com",value:t,onChange:e=>l(e.target.value),required:!0,disabled:o})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Senha"}),a.jsx("input",{type:"password",placeholder:"••••••••",value:i,onChange:e=>r(e.target.value),required:!0,disabled:o})]}),d&&a.jsxs("div",{className:"error-message",children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})}),d]}),a.jsx("button",{type:"submit",className:"login-button",disabled:o,children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"spinner"}),"Entrando..."]}):"Entrar"})]})]})})}const L=s.createContext({}),f=()=>{const e=s.useContext(L);if(!e)throw new Error("useTheme deve ser usado dentro de um ThemeProvider");return e};function N({children:e}){const[t,n]=s.useState(()=>localStorage.getItem("theme")||"dark");s.useEffect(()=>{const e=document.documentElement;"light"===t?e.classList.add("light-theme"):e.classList.remove("light-theme"),localStorage.setItem("theme",t)},[t]);const l=s.useCallback(()=>{n(e=>"dark"===e?"light":"dark")},[]),i=s.useCallback(()=>{n("dark")},[]),r=s.useCallback(()=>{n("light")},[]),o={theme:t,isDark:"dark"===t,isLight:"light"===t,toggleTheme:l,setDarkTheme:i,setLightTheme:r};return a.jsx(L.Provider,{value:o,children:e})}const M=s.memo(function({conversations:e,selectedConversation:t,onSelectConversation:n,loading:i,onNewConversation:r,onNavigateToCRM:d,onNavigateToAnalytics:h,onNavigateToStock:u,onNavigateToOS:m,labels:C=[],onManageLabels:x}){const{signOut:v}=l(),{isDark:j,toggleTheme:g}=f(),[p,b]=s.useState(null),[L,N]=s.useState(!1),[M,w]=s.useState("all"),V=C.reduce((e,s)=>(e[s.id]=s,e),{}),k=s.useMemo(()=>e.filter(e=>e.trava).length,[e]),H=s.useMemo(()=>{let s=e;return"on-hold"===M&&(s=s.filter(e=>e.trava)),p&&(s=s.filter(e=>e.labelId===p)),s},[e,M,p]),y=s.useCallback(e=>{try{return o(e)}catch{return""}},[]);return a.jsxs("div",{className:"sidebar",children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsx("h2",{children:"IA Conversa"}),a.jsxs("div",{className:"sidebar-header-actions",children:[a.jsx("button",{className:"icon-button analytics-btn",onClick:h,title:"Analytics",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z"})})}),a.jsx("button",{className:"icon-button crm-btn",onClick:d,title:"CRM Kanban",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M3,3H11V11H3V3M13,3H21V11H13V3M3,13H11V21H3V13M13,13H21V21H13V13Z"})})}),a.jsx("button",{className:"icon-button stock-btn",onClick:u,title:"Estoque de Produtos",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M19,18H6V8H19M19,6H6V4H19M3,14H4V20H20V14H21V20A1,1 0 0,1 20,21H4A1,1 0 0,1 3,20V14M16,8V10H14V12H12V10H10V8H12V6H14V8H16Z"})})}),a.jsx("button",{className:"icon-button labels-btn",onClick:x,title:"Gerenciar Etiquetas",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z"})})}),a.jsx("button",{className:"icon-button theme-toggle-btn",onClick:g,title:j?"Modo Claro":"Modo Escuro",children:j?a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z"})}):a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"})})}),a.jsx("button",{className:"icon-button new-conversation-btn",onClick:r,title:"Nova Conversa",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M11,13H9V11H7V9H9V7H11V9H13V11H11V13Z"})})}),a.jsx("button",{className:"icon-button logout-btn",onClick:v,title:"Sair",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z"})})})]})]}),a.jsxs("div",{className:"sidebar-tabs",children:[a.jsx("button",{className:"sidebar-tab "+("all"===M?"active":""),onClick:()=>w("all"),children:"Todos"}),a.jsxs("button",{className:"sidebar-tab "+("on-hold"===M?"active":""),onClick:()=>w("on-hold"),children:["Em espera",k>0&&a.jsx("span",{className:"tab-count",children:k})]})]}),a.jsxs("div",{className:"sidebar-search",children:[a.jsxs("div",{className:"search-box",children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",className:"search-icon",children:a.jsx("path",{fill:"currentColor",d:"M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5C16,5.91 13.09,3 9.5,3C5.91,3 3,5.91 3,9.5C3,13.09 5.91,16 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14C7.01,14 5,11.99 5,9.5C5,7.01 7.01,5 9.5,5C11.99,5 14,7.01 14,9.5C14,11.99 11.99,14 9.5,14Z"})}),a.jsx("input",{type:"text",placeholder:"Pesquisar conversas"}),C.length>0&&a.jsx("button",{className:"filter-label-btn "+(L?"active":""),onClick:()=>N(!L),title:"Filtrar por etiqueta",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",children:a.jsx("path",{fill:"currentColor",d:"M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3H19C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z"})})})]}),L&&C.length>0&&a.jsxs("div",{className:"label-filter-bar",children:[a.jsx("button",{className:"label-filter-chip "+(null===p?"active":""),onClick:()=>b(null),children:"Todas"}),C.map(e=>a.jsxs("button",{className:"label-filter-chip "+(p===e.id?"active":""),onClick:()=>b(e.id),style:{"--label-color":e.color,backgroundColor:p===e.id?e.color:void 0},children:[a.jsx("span",{className:"chip-dot",style:{backgroundColor:e.color}}),e.name]},e.id))]})]}),a.jsx("div",{className:"conversations-list",children:i?a.jsx(c,{count:8}):0===H.length?a.jsx("div",{className:"empty-state",children:"on-hold"===M?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Nenhuma conversa em espera"}),a.jsx("small",{children:'Conversas marcadas como "em espera" aparecerao aqui'})]}):p?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Nenhuma conversa com esta etiqueta"}),a.jsx("small",{children:"Remova o filtro para ver todas as conversas"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Nenhuma conversa ainda"}),a.jsx("small",{children:"As conversas do n8n aparecerao aqui"})]})}):H.map(e=>{const s=e.labelId?V[e.labelId]:null;return a.jsxs("div",{className:`conversation-item ${t?.userId===e.userId?"active":""} ${e.trava?"on-hold":""}`,onClick:()=>n(e),children:[a.jsx("div",{className:"conversation-avatar",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:a.jsx("path",{fill:"currentColor",d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"})})}),a.jsxs("div",{className:"conversation-info",children:[a.jsxs("div",{className:"conversation-header",children:[a.jsx("h3",{className:"conversation-name",children:e.userName}),a.jsx("span",{className:"conversation-time",children:y(e.lastTimestamp)})]}),s&&a.jsx("div",{className:"conversation-label",children:a.jsx("span",{className:"label-badge-small",style:{backgroundColor:s.color},children:s.name})}),a.jsxs("div",{className:"conversation-preview",children:[a.jsx("p",{className:"last-message",children:e.lastMessage}),e.unread>0&&a.jsx("span",{className:"unread-badge",children:e.unread})]})]})]},e.userId)})})]})});const w=s.memo(function({currentView:e,onNavigate:t,onNewConversation:n,conversations:i=[],selectedConversation:r=null,onSelectConversation:o=()=>{},loading:c=!1}){const{signOut:d}=l(),{isDark:h,toggleTheme:u}=f(),[m,C]=s.useState(!1),[x,v]=s.useState("conversations"),j=s.useCallback(()=>{C(!m),m||v("chat"===e?"conversations":"navigation")},[m,e]),g=s.useCallback(e=>{t(e),C(!1)},[t]),p=s.useCallback(s=>{o(s),"chat"!==e&&t("chat"),C(!1)},[o,e,t]),b=s.useCallback(e=>{const s=new Date(e),a=new Date-s,t=Math.floor(a/36e5);return t<24?s.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):t<48?"Ontem":s.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})},[]),L=s.useCallback(e=>e?e.substring(0,2).toUpperCase():"?",[]);return a.jsxs(a.Fragment,{children:[!r&&a.jsxs("div",{className:"mobile-bottom-nav",children:[a.jsxs("button",{className:"nav-button",onClick:j,children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})}),a.jsx("span",{children:"Menu"})]}),a.jsxs("button",{className:"nav-button "+("crm"===e?"active":""),onClick:()=>g("crm"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z"})}),a.jsx("span",{children:"CRM"})]}),a.jsxs("button",{className:"nav-button "+("analytics"===e?"active":""),onClick:()=>g("analytics"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z"})}),a.jsx("span",{children:"Analytics"})]})]}),m&&a.jsx("div",{className:"menu-overlay",onClick:()=>C(!1)}),a.jsxs("div",{className:"mobile-menu "+(m?"open":""),children:[a.jsxs("div",{className:"menu-header",children:[a.jsx("h2",{children:"Menu"}),a.jsx("button",{className:"menu-close",onClick:j,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})})]}),a.jsxs("div",{className:"menu-tabs",children:[a.jsxs("button",{className:"menu-tab "+("conversations"===x?"active":""),onClick:()=>v("conversations"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18"})}),a.jsx("span",{children:"Conversas"})]}),a.jsxs("button",{className:"menu-tab "+("navigation"===x?"active":""),onClick:()=>v("navigation"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})}),a.jsx("span",{children:"Navegação"})]})]}),"conversations"===x?a.jsx("div",{className:"mobile-conversations",children:c?a.jsx("div",{className:"loading",children:"Carregando conversas..."}):0===i.length?a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Nenhuma conversa ainda"}),a.jsx("small",{children:"Clique em + para criar uma nova conversa"})]}):i.map(e=>a.jsxs("div",{className:"conversation-item "+(r?.userId===e.userId?"active":""),onClick:()=>p(e),children:[a.jsx("div",{className:"conversation-avatar",children:L(e.userName)}),a.jsxs("div",{className:"conversation-info",children:[a.jsxs("div",{className:"conversation-header",children:[a.jsx("span",{className:"conversation-name",children:e.userName}),a.jsx("span",{className:"conversation-time",children:b(e.lastTimestamp)})]}),a.jsxs("div",{className:"conversation-preview",children:[a.jsx("span",{className:"last-message",children:e.lastMessage}),e.unread>0&&a.jsx("span",{className:"unread-badge",children:e.unread})]})]})]},e.userId))}):a.jsxs("nav",{className:"menu-items",children:[a.jsxs("button",{className:"menu-item "+("chat"===e?"active":""),onClick:()=>g("chat"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18"})}),a.jsx("span",{children:"Chat"})]}),a.jsxs("button",{className:"menu-item "+("crm"===e?"active":""),onClick:()=>g("crm"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z"})}),a.jsx("span",{children:"CRM"})]}),a.jsxs("button",{className:"menu-item "+("analytics"===e?"active":""),onClick:()=>g("analytics"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z"})}),a.jsx("span",{children:"Analytics"})]}),a.jsx("div",{className:"menu-divider"}),a.jsxs("button",{className:"menu-item",onClick:()=>{n(),C(!1)},children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M11,13H9V11H7V9H9V7H11V9H13V11H11V13Z"})}),a.jsx("span",{children:"Nova Conversa"})]}),a.jsxs("button",{className:"menu-item theme-item",onClick:u,children:[h?a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z"})}):a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"})}),a.jsx("span",{children:h?"Modo Claro":"Modo Escuro"})]}),a.jsxs("button",{className:"menu-item logout-item",onClick:d,children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z"})}),a.jsx("span",{children:"Sair"})]})]}),a.jsx("div",{className:"menu-footer",children:a.jsxs("div",{className:"menu-user",children:[a.jsx("div",{className:"user-avatar",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"})})}),a.jsxs("div",{className:"user-info",children:[a.jsx("span",{className:"user-name",children:"Admin"}),a.jsx("span",{className:"user-status",children:"Online"})]})]})})]})]})}),V=window.location.origin;function k({onClose:e,onConversationCreated:t}){const[n,l]=s.useState({userId:"",userName:"",initialMessage:""}),[i,r]=s.useState(!1),[o,c]=s.useState("");return a.jsx("div",{className:"new-conversation-modal-overlay",onClick:e,children:a.jsxs("div",{className:"new-conversation-modal",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Nova Conversa"}),a.jsx("button",{className:"modal-close-btn",onClick:e,children:"×"})]}),a.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),c(""),n.userId.trim())if(n.userName.trim()){r(!0);try{const s=await fetch(`${V}/api/conversations/new`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n.userId.trim(),userName:n.userName.trim(),initialMessage:n.initialMessage.trim()||"Olá! Como posso ajudar?"})});if(s.ok){const a=await s.json();t(a),e()}else{const e=await s.json();c(e.error||"Erro ao criar conversa")}}catch(a){c("Erro ao conectar com o servidor")}finally{r(!1)}}else c("Nome do usuário é obrigatório");else c("ID do usuário é obrigatório")},className:"modal-content",children:[o&&a.jsx("div",{className:"error-message",children:o}),a.jsxs("div",{className:"form-field",children:[a.jsxs("label",{htmlFor:"userId",children:["ID do Usuário *",a.jsx("span",{className:"field-hint",children:"Identificador único do usuário"})]}),a.jsx("input",{type:"text",id:"userId",value:n.userId,onChange:e=>l({...n,userId:e.target.value}),placeholder:"Ex: user_123, tel_5511999999999",required:!0,disabled:i})]}),a.jsxs("div",{className:"form-field",children:[a.jsxs("label",{htmlFor:"userName",children:["Nome do Usuário *",a.jsx("span",{className:"field-hint",children:"Nome de exibição"})]}),a.jsx("input",{type:"text",id:"userName",value:n.userName,onChange:e=>l({...n,userName:e.target.value}),placeholder:"Ex: João Silva",required:!0,disabled:i})]}),a.jsxs("div",{className:"form-field",children:[a.jsxs("label",{htmlFor:"initialMessage",children:["Mensagem Inicial (opcional)",a.jsx("span",{className:"field-hint",children:"Primeira mensagem enviada ao usuário"})]}),a.jsx("textarea",{id:"initialMessage",value:n.initialMessage,onChange:e=>l({...n,initialMessage:e.target.value}),placeholder:"Ex: Olá! Como posso ajudar você hoje?",rows:"3",disabled:i})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"btn-cancel",onClick:e,disabled:i,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"btn-create",disabled:i,children:i?"Criando...":"Criar Conversa"})]})]})]})})}const H=["#25D366","#FFB800","#FF5722","#2196F3","#4CAF50","#E91E63","#9C27B0","#00BCD4","#795548","#607D8B"];function y({isOpen:e,onClose:t,labels:n,onLabelsChange:l}){const[i,o]=s.useState([]),[c,d]=s.useState(null),[h,u]=s.useState({name:"",color:"#25D366"}),[m,C]=s.useState(!1),[x,v]=s.useState("");s.useEffect(()=>{o(n||[])},[n]);return e?a.jsx("div",{className:"label-manager-overlay",onClick:t,children:a.jsxs("div",{className:"label-manager-modal",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"label-manager-header",children:[a.jsx("h2",{children:"Gerenciar Etiquetas"}),a.jsx("button",{className:"close-btn",onClick:t,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})})]}),x&&a.jsx("div",{className:"label-manager-error",children:x}),a.jsxs("div",{className:"label-manager-content",children:[a.jsxs("div",{className:"new-label-form",children:[a.jsx("h3",{children:"Nova Etiqueta"}),a.jsxs("div",{className:"form-row",children:[a.jsx("input",{type:"text",placeholder:"Nome da etiqueta",value:h.name,onChange:e=>u({...h,name:e.target.value}),maxLength:30}),a.jsx("div",{className:"color-picker",children:H.map(e=>a.jsx("button",{className:"color-option "+(h.color===e?"selected":""),style:{backgroundColor:e},onClick:()=>u({...h,color:e})},e))}),a.jsx("button",{className:"create-btn",onClick:async()=>{if(h.name.trim()){C(!0),v("");try{const e=await fetch(`${r}/api/labels`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!e.ok)throw new Error("Erro ao criar etiqueta");const s=await e.json();o([...i,s]),u({name:"",color:"#25D366"}),l?.()}catch(e){v("Erro ao criar etiqueta")}finally{C(!1)}}else v("Digite um nome para a etiqueta")},disabled:m||!h.name.trim(),children:"Criar"})]})]}),a.jsxs("div",{className:"labels-list",children:[a.jsxs("h3",{children:["Etiquetas (",i.length,")"]}),0===i.length?a.jsx("p",{className:"empty-message",children:"Nenhuma etiqueta criada ainda"}):i.map(e=>a.jsx("div",{className:"label-item",children:c?.id===e.id?a.jsxs("div",{className:"label-edit-form",children:[a.jsx("input",{type:"text",value:c.name,onChange:e=>d({...c,name:e.target.value}),maxLength:30}),a.jsx("div",{className:"color-picker compact",children:H.map(e=>a.jsx("button",{className:"color-option "+(c.color===e?"selected":""),style:{backgroundColor:e},onClick:()=>d({...c,color:e})},e))}),a.jsxs("div",{className:"edit-actions",children:[a.jsx("button",{className:"save-btn",onClick:()=>(async e=>{C(!0),v("");try{const s=await fetch(`${r}/api/labels/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,color:e.color})});if(!s.ok)throw new Error("Erro ao atualizar etiqueta");const a=await s.json();o(i.map(e=>e.id===a.id?a:e)),d(null),l?.()}catch(s){v("Erro ao atualizar etiqueta")}finally{C(!1)}})(c),disabled:m,children:"Salvar"}),a.jsx("button",{className:"cancel-btn",onClick:()=>d(null),children:"Cancelar"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"label-preview",children:a.jsx("span",{className:"label-badge",style:{backgroundColor:e.color},children:e.name})}),a.jsxs("div",{className:"label-actions",children:[a.jsx("button",{className:"edit-btn",onClick:()=>d({...e}),title:"Editar",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",children:a.jsx("path",{fill:"currentColor",d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"})})}),a.jsx("button",{className:"delete-btn",onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir esta etiqueta? Ela será removida de todas as conversas.")){C(!0),v("");try{if(!(await fetch(`${r}/api/labels/${e}`,{method:"DELETE"})).ok)throw new Error("Erro ao excluir etiqueta");o(i.filter(s=>s.id!==e)),l?.()}catch(s){v("Erro ao excluir etiqueta")}finally{C(!1)}}})(e.id),title:"Excluir",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",children:a.jsx("path",{fill:"currentColor",d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"})})})]})]})},e.id))]})]})]})}):null}const A=()=>v(()=>import("./kanban-B3zvhY4Q.js"),__vite__mapDeps([0,1,2,3,4,5])),S=()=>v(()=>import("./analytics-C6gnzPUs.js"),__vite__mapDeps([6,1,2,3,4,7])),E=()=>v(()=>import("./stock-C8RUvQpR.js").then(e=>e.P),__vite__mapDeps([8,1,2,3,4,9,10])),I=()=>v(()=>import("./service-orders-Bxl19OdH.js"),__vite__mapDeps([11,1,2,3,4,12])),B=s.lazy(A),T=s.lazy(S),Z=s.lazy(E),q=s.lazy(I),D=()=>a.jsx("div",{className:"app-loading",children:a.jsx(d,{size:"large",text:"Carregando..."})});function O(){const{user:e,loading:t}=l(),{socket:n,on:i,off:o}=(()=>{const e=s.useRef(null);s.useEffect(()=>{j||(j=u(r,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5,transports:["websocket","polling"]}),j.on("connect",()=>{}),j.on("disconnect",e=>{"io server disconnect"===e&&j.connect()}),j.on("connect_error",e=>{})),e.current=j},[]);const a=s.useCallback((s,a)=>{e.current&&e.current.on(s,a)},[]),t=s.useCallback((s,a)=>{e.current&&e.current.off(s,a)},[]),n=s.useCallback((s,a)=>{e.current&&e.current.emit(s,a)},[]);return{socket:e.current,on:a,off:t,emit:n,isConnected:e.current?.connected??!1}})(),c=(()=>{const e=s.useRef(new Map),a=s.useRef(new Set);return{has:s.useCallback(s=>e.current.has(s),[]),get:s.useCallback(s=>e.current.get(s),[]),set:s.useCallback((s,a)=>{e.current.set(s,{data:a,timestamp:Date.now()})},[]),remove:s.useCallback(s=>{e.current.delete(s)},[]),clear:s.useCallback(()=>{e.current.clear(),a.current.clear()},[]),isLoading:s.useCallback(e=>a.current.has(e),[]),setLoading:s.useCallback(e=>{a.current.add(e)},[]),clearLoading:s.useCallback(e=>{a.current.delete(e)},[]),updateMessages:s.useCallback((s,a)=>{const t=e.current.get(s);t&&e.current.set(s,{...t,data:{...t.data,messages:a}})},[]),isStale:s.useCallback((s,a=3e5)=>{const t=e.current.get(s);return!t||Date.now()-t.timestamp>a},[])}})(),[m,C]=s.useState("chat"),[x,v]=s.useState([]),[g,L]=s.useState(null),[f,N]=s.useState(!0),[V,H]=s.useState(!1),[O,P]=s.useState(!1),[R,$]=s.useState(!1),[_,F]=s.useState([]),z=s.useCallback(async()=>{try{const e=await fetch(`${r}/api/conversations`),s=await e.json();v(s),N(!1)}catch(e){N(!1)}},[]),J=s.useCallback(async()=>{try{const e=await fetch(`${r}/api/labels`),s=await e.json();F(s)}catch(e){}},[]),U=s.useCallback(e=>{const s=e.sort((e,s)=>new Date(s.lastTimestamp)-new Date(e.lastTimestamp));v(s),N(!1)},[]),K=s.useCallback(({userId:e,conversation:s})=>{v(a=>{const t=a.filter(s=>s.userId!==e);return[s,...t]}),L(a=>a?.userId===e?s:a)},[]),G=s.useCallback(({userId:e,labelId:s})=>{v(a=>a.map(a=>a.userId===e?{...a,labelId:s}:a)),L(a=>a?.userId===e?{...a,labelId:s}:a)},[]),W=s.useCallback(({userId:e,trava:s})=>{v(a=>a.map(a=>a.userId===e?{...a,trava:s}:a)),L(a=>a?.userId===e?{...a,trava:s}:a)},[]);s.useEffect(()=>{if(e&&n)return 0===x.length&&z(),J(),i("init",U),i("message",K),i("labels-updated",J),i("conversation-label-updated",G),i("trava-updated",W),()=>{o("init",U),o("message",K),o("labels-updated",J),o("conversation-label-updated",G),o("trava-updated",W)}},[e,n,i,o,z,J,U,K,G,W]),s.useEffect(()=>{var s;e&&(s=[{loader:A,name:"KanbanBoard"},{loader:S,name:"Analytics"},{loader:E,name:"ProductStock"},{loader:I,name:"ServiceOrders"}],"requestIdleCallback"in window?requestIdleCallback(()=>{s.forEach(({loader:e,name:s})=>{p(e,s)})}):setTimeout(()=>{s.forEach(({loader:e,name:s})=>{p(e,s)})},1e3))},[e]);const Q=s.useCallback(async e=>{try{const s=e.userId;if(c.isLoading(s))return;const a={...e,messages:e.messages||[],totalMessages:e.messages?.length||0,hasMore:!0};if(v(e=>e.map(e=>e.userId===s?{...e,unread:0}:e)),c.has(s)&&!c.isStale(s,18e4)){const e=c.get(s);return L(e.data),void H(!1)}if(c.has(s)){const e=c.get(s);L(e.data)}else L(a),H(!0);c.setLoading(s);const t=await fetch(`${r}/api/conversations/${s}?limit=20&offset=0`);if(!t.ok)return c.set(s,a),c.clearLoading(s),L(a),void H(!1);const n=await t.json();c.set(s,n),c.clearLoading(s),L(n),H(!1);x.filter(e=>e.userId!==s&&!c.has(e.userId)).slice(0,2).forEach((e,s)=>{setTimeout(()=>{c.isLoading(e.userId)||fetch(`${r}/api/conversations/${e.userId}?limit=20&offset=0`).then(e=>e.ok?e.json():null).then(s=>s&&c.set(e.userId,s)).catch(()=>{})},300*(s+1))})}catch(s){c.clearLoading(e.userId),H(!1)}},[c,x]),X=s.useCallback(async e=>{if(!g)return;const s="string"==typeof e?{message:e,type:"text"}:{message:e.content,type:e.type||"text",duration:e.duration,fileName:e.fileName,fileSize:e.fileSize,fileType:e.fileType,fileCategory:e.fileCategory};if(("text"!==s.type||s.message&&s.message.trim())&&s.message)try{const e=await fetch(`${r}/api/conversations/${g.userId}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});await e.json()}catch(a){}},[g]),Y=s.useCallback(()=>{P(!0)},[]),ee=s.useCallback(async(e,s)=>{try{(await fetch(`${r}/api/conversations/${e}/label`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({labelId:s})})).ok&&(v(a=>a.map(a=>a.userId===e?{...a,labelId:s}:a)),L(a=>a?.userId===e?{...a,labelId:s}:a))}catch(a){}},[]),se=s.useCallback(e=>{v(s=>[e,...s]),L(e)},[]),ae=s.useCallback(async()=>{if(g&&g.hasMore)try{const e=g.messages.length,s=await fetch(`${r}/api/conversations/${g.userId}?limit=50&offset=${e}`),a=await s.json();return L(e=>({...e,messages:[...a.messages,...e.messages],hasMore:a.hasMore,totalMessages:a.totalMessages})),a.messages.length}catch(e){return 0}},[g]);return t?a.jsx("div",{className:"app-loading",children:a.jsx(d,{size:"large",text:"Verificando autenticação..."})}):e?a.jsxs("div",{className:"app",children:[a.jsx(w,{currentView:m,onNavigate:C,onNewConversation:Y,conversations:x,selectedConversation:g,onSelectConversation:Q,loading:f}),"chat"===m?a.jsxs(a.Fragment,{children:[a.jsx(M,{conversations:x,selectedConversation:g,onSelectConversation:Q,onNewConversation:Y,onNavigateToCRM:()=>C("crm"),onNavigateToAnalytics:()=>C("analytics"),onNavigateToStock:()=>C("stock"),onNavigateToOS:()=>C("os"),loading:f,labels:_,onManageLabels:()=>$(!0)}),a.jsx(h,{conversation:g,onSendMessage:X,onLoadMoreMessages:ae,socket:n,conversations:x,onSelectConversation:Q,loadingConversation:V,labels:_,onManageLabels:()=>$(!0),onLabelChange:ee,onBack:()=>L(null)})]}):"crm"===m?a.jsxs("div",{className:"crm-view",children:[a.jsxs("div",{className:"crm-nav",children:[a.jsxs("button",{className:"back-button",onClick:()=>C("chat"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})}),"Voltar para Chat"]}),a.jsxs("button",{className:"nav-button",onClick:()=>C("analytics"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z"})}),"Analytics"]})]}),a.jsx(s.Suspense,{fallback:a.jsx(D,{}),children:a.jsx(B,{socket:n})})]}):"analytics"===m?a.jsxs("div",{className:"analytics-view",children:[a.jsxs("div",{className:"analytics-nav",children:[a.jsxs("button",{className:"back-button",onClick:()=>C("chat"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})}),"Voltar para Chat"]}),a.jsxs("button",{className:"nav-button",onClick:()=>C("crm"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z"})}),"CRM"]})]}),a.jsx(s.Suspense,{fallback:a.jsx(D,{}),children:a.jsx(T,{socket:n})})]}):"stock"===m?a.jsxs("div",{className:"stock-view",children:[a.jsxs("div",{className:"stock-nav",children:[a.jsxs("button",{className:"back-button",onClick:()=>C("chat"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})}),"Voltar para Chat"]}),a.jsxs("button",{className:"nav-button",onClick:()=>C("crm"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z"})}),"CRM"]}),a.jsxs("button",{className:"nav-button",onClick:()=>C("analytics"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z"})}),"Analytics"]})]}),a.jsx(s.Suspense,{fallback:a.jsx(D,{}),children:a.jsx(Z,{})})]}):a.jsxs("div",{className:"os-view",children:[a.jsxs("div",{className:"os-nav",children:[a.jsxs("button",{className:"back-button",onClick:()=>C("chat"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})}),"Voltar para Chat"]}),a.jsxs("button",{className:"nav-button",onClick:()=>C("crm"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z"})}),"CRM"]}),a.jsxs("button",{className:"nav-button",onClick:()=>C("analytics"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z"})}),"Analytics"]})]}),a.jsx(s.Suspense,{fallback:a.jsx(D,{}),children:a.jsx(q,{socket:n})})]}),O&&a.jsx(k,{onClose:()=>P(!1),onConversationCreated:se}),R&&a.jsx(y,{isOpen:R,onClose:()=>$(!1),labels:_,onLabelsChange:J})]}):a.jsx(b,{onLogin:()=>{}})}m.createRoot(document.getElementById("root")).render(a.jsx(t.StrictMode,{children:a.jsx(N,{children:a.jsx(i,{children:a.jsx(O,{})})})}));
