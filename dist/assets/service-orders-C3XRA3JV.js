import{r as s,j as e}from"./vendor-react-r6j4PRy1.js";import{A as a}from"./chat-mOmuSIDI.js";import"./vendor-date-DJxzBke1.js";const n={aberta:"Aberta",em_andamento:"Em Andamento",aguardando_peca:"Aguardando Peca",aguardando_aprovacao:"Aguardando Aprovacao",aprovada:"Aprovada",concluida:"Concluida",entregue:"Entregue",cancelada:"Cancelada"},i={baixa:"Baixa",normal:"Normal",alta:"Alta",urgente:"Urgente"};function d({order:a,onClose:d}){const l=s.useRef(null),o=s=>s?new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",t=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s||0),r=s.useCallback(()=>{if(!l.current)return;const s=window.open("","_blank");if(!s)return;const e=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>OS ${a.numeroOs}</title>\n        <style>\n          * { margin: 0; padding: 0; box-sizing: border-box; }\n          body {\n            font-family: Arial, sans-serif;\n            font-size: 12px;\n            color: #333;\n            padding: 20px;\n          }\n          .os-pdf-container {\n            max-width: 800px;\n            margin: 0 auto;\n          }\n          .os-pdf-header {\n            text-align: center;\n            border-bottom: 2px solid #333;\n            padding-bottom: 15px;\n            margin-bottom: 20px;\n          }\n          .os-pdf-header h1 {\n            font-size: 24px;\n            margin-bottom: 5px;\n          }\n          .os-pdf-header .os-number {\n            font-size: 18px;\n            color: #555;\n          }\n          .os-pdf-header .os-date {\n            font-size: 11px;\n            color: #777;\n            margin-top: 5px;\n          }\n          .os-pdf-info-row {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 15px;\n            gap: 20px;\n          }\n          .os-pdf-info-badge {\n            display: inline-block;\n            padding: 3px 10px;\n            border-radius: 4px;\n            font-size: 11px;\n            font-weight: bold;\n            color: #fff;\n          }\n          .os-pdf-section {\n            margin-bottom: 20px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            overflow: hidden;\n          }\n          .os-pdf-section-title {\n            background: #f5f5f5;\n            padding: 8px 12px;\n            font-weight: bold;\n            font-size: 13px;\n            border-bottom: 1px solid #ddd;\n          }\n          .os-pdf-section-content {\n            padding: 12px;\n          }\n          .os-pdf-field {\n            display: flex;\n            margin-bottom: 6px;\n          }\n          .os-pdf-field label {\n            font-weight: bold;\n            min-width: 120px;\n            color: #555;\n          }\n          .os-pdf-field span {\n            flex: 1;\n          }\n          .os-pdf-grid {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 15px;\n          }\n          .os-pdf-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 10px;\n          }\n          .os-pdf-table th, .os-pdf-table td {\n            border: 1px solid #ddd;\n            padding: 6px 10px;\n            text-align: left;\n          }\n          .os-pdf-table th {\n            background: #f5f5f5;\n            font-weight: bold;\n          }\n          .os-pdf-table tfoot td {\n            font-weight: bold;\n            background: #f9f9f9;\n          }\n          .os-pdf-total {\n            text-align: right;\n            font-size: 16px;\n            font-weight: bold;\n            margin-top: 15px;\n            padding: 10px;\n            background: #f5f5f5;\n            border-radius: 4px;\n          }\n          .os-pdf-footer {\n            margin-top: 40px;\n            border-top: 1px solid #ddd;\n            padding-top: 20px;\n          }\n          .os-pdf-signatures {\n            display: flex;\n            justify-content: space-between;\n            margin-top: 60px;\n          }\n          .os-pdf-signature {\n            text-align: center;\n            width: 200px;\n          }\n          .os-pdf-signature-line {\n            border-top: 1px solid #333;\n            margin-bottom: 5px;\n          }\n          .os-pdf-garantia {\n            margin-top: 20px;\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            font-size: 10px;\n            color: #666;\n          }\n          @media print {\n            body { padding: 0; }\n            .no-print { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="os-pdf-container">\n          <div class="os-pdf-header">\n            <h1>ORDEM DE SERVICO</h1>\n            <div class="os-number">${a.numeroOs}</div>\n            <div class="os-date">Emitida em: ${o(a.dataEntrada)} | Status: ${n[a.status]} | Prioridade: ${i[a.prioridade]}</div>\n          </div>\n\n          <div class="os-pdf-grid">\n            <div class="os-pdf-section">\n              <div class="os-pdf-section-title">DADOS DO CLIENTE</div>\n              <div class="os-pdf-section-content">\n                <div class="os-pdf-field"><label>Nome:</label><span>${a.clienteNome}</span></div>\n                <div class="os-pdf-field"><label>Telefone:</label><span>${a.clienteTelefone||"-"}</span></div>\n                <div class="os-pdf-field"><label>Email:</label><span>${a.clienteEmail||"-"}</span></div>\n                <div class="os-pdf-field"><label>Endereco:</label><span>${a.clienteEndereco||"-"}</span></div>\n                <div class="os-pdf-field"><label>CPF/CNPJ:</label><span>${a.clienteCpfCnpj||"-"}</span></div>\n              </div>\n            </div>\n\n            <div class="os-pdf-section">\n              <div class="os-pdf-section-title">EQUIPAMENTO</div>\n              <div class="os-pdf-section-content">\n                <div class="os-pdf-field"><label>Equipamento:</label><span>${a.equipamento||"-"}</span></div>\n                <div class="os-pdf-field"><label>Marca:</label><span>${a.marca||"-"}</span></div>\n                <div class="os-pdf-field"><label>Modelo:</label><span>${a.modelo||"-"}</span></div>\n                <div class="os-pdf-field"><label>N Serie:</label><span>${a.numeroSerie||"-"}</span></div>\n              </div>\n            </div>\n          </div>\n\n          <div class="os-pdf-section">\n            <div class="os-pdf-section-title">SERVICO</div>\n            <div class="os-pdf-section-content">\n              <div class="os-pdf-field"><label>Descricao:</label><span>${a.descricao}</span></div>\n              ${a.diagnostico?`<div class="os-pdf-field"><label>Diagnostico:</label><span>${a.diagnostico}</span></div>`:""}\n              ${a.solucao?`<div class="os-pdf-field"><label>Solucao:</label><span>${a.solucao}</span></div>`:""}\n              ${a.observacoes?`<div class="os-pdf-field"><label>Observacoes:</label><span>${a.observacoes}</span></div>`:""}\n              <div class="os-pdf-field"><label>Tecnico:</label><span>${a.tecnicoNome||"-"}</span></div>\n              <div class="os-pdf-field"><label>Previsao:</label><span>${o(a.dataPrevisao)}</span></div>\n            </div>\n          </div>\n\n          ${a.itens&&a.itens.length>0?`\n          <div class="os-pdf-section">\n            <div class="os-pdf-section-title">ITENS / SERVICOS</div>\n            <div class="os-pdf-section-content">\n              <table class="os-pdf-table">\n                <thead>\n                  <tr>\n                    <th>Descricao</th>\n                    <th>Qtd</th>\n                    <th>Valor Unit.</th>\n                    <th>Subtotal</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ${a.itens.map(s=>`\n                    <tr>\n                      <td>${s.descricao}</td>\n                      <td>${s.quantidade}</td>\n                      <td>${t(s.valorUnitario)}</td>\n                      <td>${t(s.quantidade*s.valorUnitario)}</td>\n                    </tr>\n                  `).join("")}\n                </tbody>\n                <tfoot>\n                  <tr>\n                    <td colspan="3">Total Itens</td>\n                    <td>${t(a.itens.reduce((s,e)=>s+e.quantidade*e.valorUnitario,0))}</td>\n                  </tr>\n                </tfoot>\n              </table>\n            </div>\n          </div>\n          `:""}\n\n          <div class="os-pdf-section">\n            <div class="os-pdf-section-title">VALORES</div>\n            <div class="os-pdf-section-content">\n              <div class="os-pdf-field"><label>Servico:</label><span>${t(a.valorServico)}</span></div>\n              <div class="os-pdf-field"><label>Pecas:</label><span>${t(a.valorPecas)}</span></div>\n              <div class="os-pdf-field"><label>Desconto:</label><span>${t(a.desconto)}</span></div>\n              <div class="os-pdf-field"><label>Pagamento:</label><span>${a.formaPagamento||"-"}</span></div>\n            </div>\n          </div>\n\n          <div class="os-pdf-total">\n            VALOR TOTAL: ${t(a.valorTotal)}\n          </div>\n\n          <div class="os-pdf-footer">\n            <div class="os-pdf-garantia">\n              <strong>TERMO DE GARANTIA:</strong> Este servico possui garantia de ${a.garantiaDias||90} dias a partir da data de entrega,\n              cobrindo defeitos relacionados ao servico executado. A garantia nao cobre mau uso, danos fisicos,\n              ou problemas nao relacionados ao servico realizado. Para acionar a garantia, apresente esta ordem de servico.\n            </div>\n\n            <div class="os-pdf-signatures">\n              <div class="os-pdf-signature">\n                <div class="os-pdf-signature-line"></div>\n                <span>Responsavel Tecnico</span>\n              </div>\n              <div class="os-pdf-signature">\n                <div class="os-pdf-signature-line"></div>\n                <span>Cliente</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;s.document.write(e),s.document.close(),s.focus(),setTimeout(()=>{s.print()},500)},[a]);return e.jsx("div",{className:"os-modal-overlay",onClick:d,children:e.jsxs("div",{className:"os-pdf-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"os-modal-header",children:[e.jsxs("h2",{children:["Imprimir OS - ",a.numeroOs]}),e.jsx("button",{className:"os-modal-close",onClick:d,children:e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:e.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})})]}),e.jsx("div",{className:"os-pdf-preview",ref:l,children:e.jsxs("div",{className:"os-pdf-preview-content",children:[e.jsxs("div",{className:"os-pdf-preview-header",children:[e.jsx("h2",{children:"ORDEM DE SERVICO"}),e.jsx("p",{className:"os-pdf-preview-number",children:a.numeroOs}),e.jsxs("p",{className:"os-pdf-preview-date",children:["Emitida em: ",o(a.dataEntrada)," | Status: ",n[a.status]]})]}),e.jsxs("div",{className:"os-pdf-preview-section",children:[e.jsx("h3",{children:"Cliente"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",a.clienteNome]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Telefone:"})," ",a.clienteTelefone||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",a.clienteEmail||"-"]})]}),e.jsxs("div",{className:"os-pdf-preview-section",children:[e.jsx("h3",{children:"Equipamento"}),e.jsxs("p",{children:[a.equipamento||"-"," - ",a.marca||""," ",a.modelo||""]}),a.numeroSerie&&e.jsxs("p",{children:[e.jsx("strong",{children:"S/N:"})," ",a.numeroSerie]})]}),e.jsxs("div",{className:"os-pdf-preview-section",children:[e.jsx("h3",{children:"Servico"}),e.jsx("p",{children:a.descricao})]}),e.jsxs("div",{className:"os-pdf-preview-section",children:[e.jsx("h3",{children:"Valor Total"}),e.jsx("p",{className:"os-pdf-preview-total",children:t(a.valorTotal)})]})]})}),e.jsxs("div",{className:"os-modal-footer",children:[e.jsx("button",{type:"button",className:"os-btn os-btn-cancel",onClick:d,children:"Fechar"}),e.jsxs("button",{type:"button",className:"os-btn os-btn-print",onClick:r,children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:e.jsx("path",{fill:"currentColor",d:"M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"})}),"Imprimir / Salvar PDF"]})]})]})})}const l={aberta:"Aberta",em_andamento:"Em Andamento",aguardando_peca:"Aguardando Peca",aguardando_aprovacao:"Aguardando Aprovacao",aprovada:"Aprovada",concluida:"Concluida",entregue:"Entregue",cancelada:"Cancelada"},o={aberta:"#3498db",em_andamento:"#f39c12",aguardando_peca:"#9b59b6",aguardando_aprovacao:"#e67e22",aprovada:"#2ecc71",concluida:"#27ae60",entregue:"#1abc9c",cancelada:"#e74c3c"},t={baixa:"Baixa",normal:"Normal",alta:"Alta",urgente:"Urgente"},r={baixa:"#95a5a6",normal:"#3498db",alta:"#e67e22",urgente:"#e74c3c"};const c=s.memo(function({socket:n}){const[i,c]=s.useState([]),[p,h]=s.useState(null),[x,m]=s.useState(!0),[v,j]=s.useState(!1),[f,u]=s.useState(!1),[b,g]=s.useState(null),[N,C]=s.useState(""),[w,y]=s.useState(""),[E,S]=s.useState(""),[A,V]=s.useState("list"),$=s.useCallback(async()=>{try{const s=new URLSearchParams;N&&s.append("status",N),w&&s.append("prioridade",w),E&&s.append("search",E);const e=await fetch(`${a}/api/service-orders?${s}`),n=await e.json();c(n),m(!1)}catch(s){m(!1)}},[N,w,E]),H=s.useCallback(async()=>{try{const s=await fetch(`${a}/api/service-orders/stats`),e=await s.json();h(e)}catch(s){}},[]);s.useEffect(()=>{$(),H()},[$,H]),s.useEffect(()=>{if(!n)return;const s=s=>{c(e=>[s,...e]),H()},e=s=>{c(e=>e.map(e=>e.id===s.id?s:e)),b?.id===s.id&&g(s),H()},a=s=>{c(e=>e.map(e=>e.id===s.id?{...e,...s}:e)),b?.id===s.id&&g(e=>({...e,...s})),H()},i=({id:s})=>{c(e=>e.filter(e=>e.id!==s)),b?.id===s&&(g(null),V("list")),H()};return n.on("os-created",s),n.on("os-updated",e),n.on("os-status-updated",a),n.on("os-deleted",i),()=>{n.off("os-created",s),n.off("os-updated",e),n.off("os-status-updated",a),n.off("os-deleted",i)}},[n,b,H]);const L=s.useCallback(()=>{g(null),j(!0)},[]),k=s.useCallback(s=>{g(s),j(!0)},[]),O=s.useCallback(s=>{g(s),V("detail")},[]),T=s.useCallback(s=>{g(s),u(!0)},[]),P=s.useCallback(async s=>{if(confirm("Tem certeza que deseja excluir esta OS?"))try{await fetch(`${a}/api/service-orders/${s}`,{method:"DELETE"})}catch(e){}},[]),M=s.useCallback(async(s,e)=>{try{await fetch(`${a}/api/service-orders/${s}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})}catch(n){}},[]);s.useCallback(async s=>{try{const e=s.id?"PUT":"POST",n=s.id?`${a}/api/service-orders/${s.id}`:`${a}/api/service-orders`,i=await fetch(n,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(i.ok)j(!1),$(),H();else{const s=await i.json();alert(s.error||"Erro ao salvar OS")}}catch(e){alert("Erro de conexao ao salvar OS")}},[$,H]);const D=s.useCallback(s=>s?new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",[]),R=s.useCallback(s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s||0),[]);return"detail"===A&&b?e.jsxs("div",{className:"os-detail-view",children:[e.jsxs("div",{className:"os-detail-header",children:[e.jsxs("button",{className:"os-back-btn",onClick:()=>V("list"),children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:e.jsx("path",{fill:"currentColor",d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})}),"Voltar"]}),e.jsxs("div",{className:"os-detail-actions",children:[e.jsx("button",{className:"os-btn os-btn-edit",onClick:()=>k(b),children:"Editar"}),e.jsx("button",{className:"os-btn os-btn-print",onClick:()=>T(b),children:"Imprimir PDF"})]})]}),e.jsxs("div",{className:"os-detail-content",children:[e.jsxs("div",{className:"os-detail-title",children:[e.jsx("h2",{children:b.numeroOs}),e.jsx("span",{className:"os-status-badge",style:{backgroundColor:o[b.status]},children:l[b.status]}),e.jsx("span",{className:"os-prioridade-badge",style:{backgroundColor:r[b.prioridade]},children:t[b.prioridade]})]}),e.jsxs("div",{className:"os-detail-grid",children:[e.jsxs("div",{className:"os-detail-section",children:[e.jsx("h3",{children:"Dados do Cliente"}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Nome:"}),e.jsx("span",{children:b.clienteNome})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Telefone:"}),e.jsx("span",{children:b.clienteTelefone||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:b.clienteEmail||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Endereco:"}),e.jsx("span",{children:b.clienteEndereco||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"CPF/CNPJ:"}),e.jsx("span",{children:b.clienteCpfCnpj||"-"})]})]}),e.jsxs("div",{className:"os-detail-section",children:[e.jsx("h3",{children:"Equipamento"}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Equipamento:"}),e.jsx("span",{children:b.equipamento||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Marca:"}),e.jsx("span",{children:b.marca||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Modelo:"}),e.jsx("span",{children:b.modelo||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"N Serie:"}),e.jsx("span",{children:b.numeroSerie||"-"})]})]}),e.jsxs("div",{className:"os-detail-section",children:[e.jsx("h3",{children:"Servico"}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Descricao:"}),e.jsx("span",{children:b.descricao})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Diagnostico:"}),e.jsx("span",{children:b.diagnostico||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Solucao:"}),e.jsx("span",{children:b.solucao||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Observacoes:"}),e.jsx("span",{children:b.observacoes||"-"})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Tecnico:"}),e.jsx("span",{children:b.tecnicoNome||"-"})]})]}),e.jsxs("div",{className:"os-detail-section",children:[e.jsx("h3",{children:"Valores"}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Servico:"}),e.jsx("span",{children:R(b.valorServico)})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Pecas:"}),e.jsx("span",{children:R(b.valorPecas)})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Desconto:"}),e.jsx("span",{children:R(b.desconto)})]}),e.jsxs("div",{className:"os-detail-field os-detail-total",children:[e.jsx("label",{children:"Total:"}),e.jsx("span",{children:R(b.valorTotal)})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Pagamento:"}),e.jsx("span",{children:b.formaPagamento||"-"})]})]}),e.jsxs("div",{className:"os-detail-section",children:[e.jsx("h3",{children:"Datas"}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Entrada:"}),e.jsx("span",{children:D(b.dataEntrada)})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Previsao:"}),e.jsx("span",{children:D(b.dataPrevisao)})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Conclusao:"}),e.jsx("span",{children:D(b.dataConclusao)})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Entrega:"}),e.jsx("span",{children:D(b.dataEntrega)})]}),e.jsxs("div",{className:"os-detail-field",children:[e.jsx("label",{children:"Garantia:"}),e.jsxs("span",{children:[b.garantiaDias," dias"]})]})]}),b.itens&&b.itens.length>0&&e.jsxs("div",{className:"os-detail-section os-detail-section-full",children:[e.jsx("h3",{children:"Itens/Servicos"}),e.jsxs("table",{className:"os-itens-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Descricao"}),e.jsx("th",{children:"Qtd"}),e.jsx("th",{children:"Valor Unit."}),e.jsx("th",{children:"Subtotal"})]})}),e.jsx("tbody",{children:b.itens.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.descricao}),e.jsx("td",{children:s.quantidade}),e.jsx("td",{children:R(s.valorUnitario)}),e.jsx("td",{children:R(s.quantidade*s.valorUnitario)})]},a))})]})]})]}),e.jsxs("div",{className:"os-detail-status-actions",children:[e.jsx("h3",{children:"Alterar Status"}),e.jsx("div",{className:"os-status-buttons",children:Object.entries(l).map(([s,a])=>e.jsx("button",{className:"os-status-btn "+(b.status===s?"active":""),style:{backgroundColor:b.status===s?o[s]:"transparent",borderColor:o[s],color:b.status===s?"#fff":o[s]},onClick:()=>M(b.id,s),disabled:b.status===s,children:a},s))})]})]}),f&&e.jsx(d,{order:b,onClose:()=>u(!1)})]}):e.jsxs("div",{className:"os-container",children:[e.jsxs("div",{className:"os-header",children:[e.jsx("h2",{children:"Ordens de Servico"}),e.jsxs("button",{className:"os-btn os-btn-new",onClick:L,children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:e.jsx("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})}),"Nova OS"]})]}),p&&e.jsxs("div",{className:"os-stats",children:[e.jsxs("div",{className:"os-stat-card",children:[e.jsx("span",{className:"os-stat-value",children:p.total}),e.jsx("span",{className:"os-stat-label",children:"Total"})]}),e.jsxs("div",{className:"os-stat-card",style:{borderColor:o.aberta},children:[e.jsx("span",{className:"os-stat-value",children:p.abertas}),e.jsx("span",{className:"os-stat-label",children:"Abertas"})]}),e.jsxs("div",{className:"os-stat-card",style:{borderColor:o.em_andamento},children:[e.jsx("span",{className:"os-stat-value",children:p.emAndamento}),e.jsx("span",{className:"os-stat-label",children:"Em Andamento"})]}),e.jsxs("div",{className:"os-stat-card",style:{borderColor:o.concluida},children:[e.jsx("span",{className:"os-stat-value",children:p.concluidas}),e.jsx("span",{className:"os-stat-label",children:"Concluidas"})]}),e.jsxs("div",{className:"os-stat-card os-stat-card-money",children:[e.jsx("span",{className:"os-stat-value",children:R(p.valorConcluidas)}),e.jsx("span",{className:"os-stat-label",children:"Faturado"})]})]}),e.jsxs("div",{className:"os-filters",children:[e.jsxs("div",{className:"os-search",children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:e.jsx("path",{fill:"currentColor",d:"M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5C16,5.91 13.09,3 9.5,3C5.91,3 3,5.91 3,9.5C3,13.09 5.91,16 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14C7.01,14 5,11.99 5,9.5C5,7.01 7.01,5 9.5,5C11.99,5 14,7.01 14,9.5C14,11.99 11.99,14 9.5,14Z"})}),e.jsx("input",{type:"text",placeholder:"Buscar OS por numero, cliente, equipamento...",value:E,onChange:s=>S(s.target.value)})]}),e.jsxs("select",{value:N,onChange:s=>C(s.target.value),className:"os-filter-select",children:[e.jsx("option",{value:"",children:"Todos os Status"}),Object.entries(l).map(([s,a])=>e.jsx("option",{value:s,children:a},s))]}),e.jsxs("select",{value:w,onChange:s=>y(s.target.value),className:"os-filter-select",children:[e.jsx("option",{value:"",children:"Todas as Prioridades"}),Object.entries(t).map(([s,a])=>e.jsx("option",{value:s,children:a},s))]})]}),e.jsx("div",{className:"os-list",children:x?e.jsx("div",{className:"os-loading",children:"Carregando ordens de servico..."}):0===i.length?e.jsxs("div",{className:"os-empty",children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",children:e.jsx("path",{fill:"currentColor",d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M9,13V18H7V13H9M15,15V18H13V15H15M11,11V18H13V11H11Z"})}),e.jsx("p",{children:"Nenhuma ordem de servico encontrada"}),e.jsx("button",{className:"os-btn os-btn-new",onClick:L,children:"Criar primeira OS"})]}):e.jsx("div",{className:"os-table-wrapper",children:e.jsxs("table",{className:"os-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"N OS"}),e.jsx("th",{children:"Cliente"}),e.jsx("th",{children:"Equipamento"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Prioridade"}),e.jsx("th",{children:"Entrada"}),e.jsx("th",{children:"Valor"}),e.jsx("th",{children:"Acoes"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{onClick:()=>O(s),children:[e.jsx("td",{className:"os-numero",children:s.numeroOs}),e.jsx("td",{children:s.clienteNome}),e.jsx("td",{children:s.equipamento||"-"}),e.jsx("td",{children:e.jsx("span",{className:"os-status-badge-sm",style:{backgroundColor:o[s.status]},children:l[s.status]})}),e.jsx("td",{children:e.jsx("span",{className:"os-prioridade-badge-sm",style:{color:r[s.prioridade]},children:t[s.prioridade]})}),e.jsx("td",{children:D(s.dataEntrada)}),e.jsx("td",{className:"os-valor",children:R(s.valorTotal)}),e.jsxs("td",{className:"os-actions",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"os-action-btn",title:"Editar",onClick:()=>k(s),children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",children:e.jsx("path",{fill:"currentColor",d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"})})}),e.jsx("button",{className:"os-action-btn",title:"Imprimir",onClick:()=>T(s),children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",children:e.jsx("path",{fill:"currentColor",d:"M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"})})}),e.jsx("button",{className:"os-action-btn os-action-btn-delete",title:"Excluir",onClick:()=>P(s.id),children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",children:e.jsx("path",{fill:"currentColor",d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"})})})]})]},s.id))})]})})}),f&&b&&e.jsx(d,{order:b,onClose:()=>u(!1)})]})});export{c as default};
