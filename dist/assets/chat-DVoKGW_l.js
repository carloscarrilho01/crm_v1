import{r as e,j as a}from"./vendor-react-r6j4PRy1.js";import{b as s,a as t,c as n,d as i,f as r,i as o,e as l}from"./vendor-date-DJxzBke1.js";const c=window.location.origin,d={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 m√™s",other:"cerca de {{count}} meses"},xMonths:{one:"1 m√™s",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},m={date:s({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:s({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:s({formats:{full:"{{date}} '√†s' {{time}}",long:"{{date}} '√†s' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},u={lastWeek:e=>{const a=e.getDay();return"'"+(0===a||6===a?"√∫ltimo":"√∫ltima")+"' eeee '√†s' p"},yesterday:"'ontem √†s' p",today:"'hoje √†s' p",tomorrow:"'amanh√£ √†s' p",nextWeek:"eeee '√†s' p",other:"P"},h={code:"pt-BR",formatDistance:(e,a,s)=>{let t;const n=d[e];return t="string"==typeof n?n:1===a?n.one:n.other.replace("{{count}}",String(a)),s?.addSuffix?s.comparison&&s.comparison>0?"em "+t:"h√° "+t:t},formatLong:m,formatRelative:(e,a,s,t)=>{const n=u[e];return"function"==typeof n?n(a):n},localize:{ordinalNumber:(e,a)=>{const s=Number(e);return"week"===a?.unit?s+"¬™":s+"¬∫"},era:t({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},defaultWidth:"wide"}),quarter:t({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1¬∫ trimestre","2¬∫ trimestre","3¬∫ trimestre","4¬∫ trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:t({values:{narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","mar√ßo","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},defaultWidth:"wide"}),day:t({values:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","ter√ßa","quarta","quinta","sexta","s√°bado"],wide:["domingo","segunda-feira","ter√ßa-feira","quarta-feira","quinta-feira","sexta-feira","s√°bado"]},defaultWidth:"wide"}),dayPeriod:t({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh√£",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh√£",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh√£",afternoon:"tarde",evening:"tarde",night:"noite"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh√£",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh√£",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh√£",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:i({matchPattern:/^(\d+)[¬∫¬™o]?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:n({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},defaultParseWidth:"any"}),quarter:n({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](¬∫)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:n({matchPatterns:{narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|mar√ßo|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},defaultParseWidth:"any"}),day:n({matchPatterns:{narrow:/^(dom|[23456]¬™?|s[a√°]b)/i,short:/^(dom|[23456]¬™?|s[a√°]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a√°]b)/i,wide:/^(domingo|(segunda|ter[c√ß]a|quarta|quinta|sexta)([- ]feira)?|s[a√°]bado)/i},defaultMatchWidth:"wide",parsePatterns:{short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a√°]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a√°]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a√°]b/i]},defaultParseWidth:"any"}),dayPeriod:n({matchPatterns:{narrow:/^(a|p|mn|md|(da) (manh√£|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh√£|tarde|noite))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh√£/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},g=e=>{const a=new Date(e);return o(a)?r(a,"HH:mm"):l(a)?`Ontem √†s ${r(a,"HH:mm")}`:r(a,"dd/MM/yyyy '√†s' HH:mm",{locale:h})},x=e=>{const a=new Date(e),s=new Date-a,t=Math.floor(s/6e4),n=Math.floor(s/36e5),i=Math.floor(s/864e5);return t<1?"agora":t<60?`h√° ${t} min`:n<24?`h√° ${n}h`:i<7?`h√° ${i}d`:r(a,"dd/MM/yyyy",{locale:h})},v=e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["Bytes","KB","MB","GB"][a]},j=e.memo(function(){return a.jsxs("div",{className:"conversation-skeleton",children:[a.jsx("div",{className:"skeleton-avatar skeleton-pulse"}),a.jsxs("div",{className:"skeleton-content",children:[a.jsxs("div",{className:"skeleton-header",children:[a.jsx("div",{className:"skeleton-name skeleton-pulse"}),a.jsx("div",{className:"skeleton-time skeleton-pulse"})]}),a.jsx("div",{className:"skeleton-message skeleton-pulse"})]})]})}),p=e.memo(function({count:e=8}){return a.jsx("div",{className:"conversation-list-skeleton",children:Array.from({length:e}).map((e,s)=>a.jsx(j,{},s))})}),f=e.memo(function({isOutgoing:e=!1}){return a.jsx("div",{className:"message-skeleton "+(e?"outgoing":"incoming"),children:a.jsxs("div",{className:"skeleton-bubble skeleton-pulse",children:[a.jsx("div",{className:"skeleton-text-line skeleton-pulse",style:{width:"80%"}}),a.jsx("div",{className:"skeleton-text-line skeleton-pulse",style:{width:"60%"}}),a.jsx("div",{className:"skeleton-text-line skeleton-pulse",style:{width:"40%"}})]})})});e.memo(function({count:e=6}){return a.jsx("div",{className:"message-list-skeleton",children:Array.from({length:e}).map((e,s)=>a.jsx(f,{isOutgoing:s%3==0},s))})});const b=e.memo(function({size:e="medium",text:s=""}){return a.jsxs("div",{className:`loading-spinner-container ${e}`,children:[a.jsxs("div",{className:"loading-spinner",children:[a.jsx("div",{className:"spinner-ring"}),a.jsx("div",{className:"spinner-ring"}),a.jsx("div",{className:"spinner-ring"})]}),s&&a.jsx("span",{className:"loading-text",children:s})]})});function N({onSendAudio:s}){const[t,n]=e.useState(!1),[i,r]=e.useState(null),[o,l]=e.useState(null),[c,d]=e.useState(0),[m,u]=e.useState(!1),h=e.useRef(null),g=e.useRef([]),x=e.useRef(null);e.useEffect(()=>()=>{x.current&&clearInterval(x.current)},[]);const v=()=>{h.current&&t&&(h.current.stop(),n(!1),x.current&&(clearInterval(x.current),x.current=null))},j=()=>{t&&v(),i&&URL.revokeObjectURL(i),r(null),l(null),d(0),u(!1)},p=async()=>{if(o)try{const e=new FileReader;e.readAsDataURL(o),e.onloadend=()=>{const a=e.result;s(a,c),j()}}catch(e){alert("Erro ao enviar √°udio")}},f=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return m?a.jsxs("div",{className:"audio-preview",children:[a.jsx("audio",{src:i,controls:!0,className:"audio-player"}),a.jsx("span",{className:"audio-duration",children:f(c)}),a.jsxs("div",{className:"audio-preview-actions",children:[a.jsx("button",{onClick:j,className:"btn-cancel",title:"Cancelar",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})}),a.jsx("button",{onClick:p,className:"btn-send-audio",title:"Enviar √°udio",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"})})})]})]}):t?a.jsxs("div",{className:"audio-recording",children:[a.jsxs("div",{className:"recording-indicator",children:[a.jsx("span",{className:"pulse-dot"}),a.jsx("span",{className:"recording-time",children:f(c)})]}),a.jsx("button",{onClick:v,className:"btn-stop-recording",title:"Parar grava√ß√£o",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M6,6H18V18H6V6Z"})})}),a.jsx("button",{onClick:j,className:"btn-cancel-recording",title:"Cancelar",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})})]}):a.jsx("button",{onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});h.current=new MediaRecorder(e),g.current=[],h.current.ondataavailable=e=>{e.data.size>0&&g.current.push(e.data)},h.current.onstop=()=>{const a=new Blob(g.current,{type:"audio/webm"}),s=URL.createObjectURL(a);r(s),l(a),u(!0),e.getTracks().forEach(e=>e.stop())},h.current.start(),n(!0),d(0),x.current=setInterval(()=>{d(e=>e+1)},1e3)}catch(e){alert("N√£o foi poss√≠vel acessar o microfone. Verifique as permiss√µes.")}},className:"btn-record-audio",title:"Gravar √°udio",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"})})})}function w({onSendFile:s}){const[t,n]=e.useState(null),[i,r]=e.useState(null),[o,l]=e.useState(null),c=e.useRef(null),d=async()=>{if(t)try{const e=new FileReader;e.onloadend=()=>{const a=e.result;s({fileName:t.name,fileSize:t.size,fileType:t.type,fileData:a,type:o}),m()},e.readAsDataURL(t)}catch(e){alert("Erro ao enviar arquivo")}},m=()=>{n(null),r(null),l(null),c.current&&(c.current.value="")},u=e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["Bytes","KB","MB"][a]};return t?a.jsxs("div",{className:"file-preview-container",children:[a.jsx("div",{className:"file-preview",children:i&&"image"===o?a.jsx("img",{src:i,alt:"Preview",className:"image-preview"}):a.jsxs("div",{className:"file-icon-preview",children:["image"===o?a.jsx("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:a.jsx("path",{fill:"currentColor",d:"M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19M8.5,13.5L11,16.5L14.5,12L19,18H5L8.5,13.5Z"})}):t?.type.includes("pdf")?a.jsx("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:a.jsx("path",{fill:"currentColor",d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.5,16H14V19H12.5V16H11V19H9.5V15A1,1 0 0,1 10.5,14H15.5A1,1 0 0,1 16.5,15V19H15.5V16M10.5,11.5C10.5,12.3 9.8,13 9,13H7.5V15H6V10H9A2,2 0 0,1 11,12M9.5,11.5V12.5H7.5V11.5H9.5M16.5,10C16.5,10.8 15.8,11.5 15,11.5H13.5V15H12V10H15A1.5,1.5 0 0,1 16.5,11.5Z"})}):a.jsx("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:a.jsx("path",{fill:"currentColor",d:"M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"})}),a.jsxs("div",{className:"file-info",children:[a.jsx("span",{className:"file-name",children:t.name}),a.jsx("span",{className:"file-size",children:u(t.size)})]})]})}),a.jsxs("div",{className:"file-actions",children:[a.jsx("button",{onClick:m,className:"btn-cancel-file",title:"Cancelar",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})}),a.jsx("button",{onClick:d,className:"btn-send-file",title:"Enviar arquivo",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("input",{ref:c,type:"file",onChange:e=>{const a=e.target.files[0];if(!a)return;if(a.size>10485760)return void alert("Arquivo muito grande! M√°ximo: 10MB");n(a);const s=a.type.split("/")[0];if(l(s),"image"===s){const e=new FileReader;e.onloadend=()=>{r(e.result)},e.readAsDataURL(a)}else r(null)},style:{display:"none"},accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt"}),a.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"btn-attach-file",title:"Anexar arquivo",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"})})})]})}e.memo(function({text:e="Carregando..."}){return a.jsx("div",{className:"loading-overlay",children:a.jsx(b,{size:"large",text:e})})}),e.memo(function(){return a.jsxs("div",{className:"chat-header-skeleton",children:[a.jsx("div",{className:"skeleton-avatar skeleton-pulse"}),a.jsxs("div",{className:"skeleton-info",children:[a.jsx("div",{className:"skeleton-name skeleton-pulse"}),a.jsx("div",{className:"skeleton-status skeleton-pulse"})]})]})});const C=window.location.origin;function L({onSelectMessage:s,onManage:t}){const[n,i]=e.useState([]),[r,o]=e.useState(!0),[l,c]=e.useState(!1);e.useEffect(()=>{d();const e=window.socket;if(e)return e.on("quick-messages-updated",d),()=>e.off("quick-messages-updated",d)},[]);const d=async()=>{try{const e=await fetch(`${C}/api/quick-messages`);if(e.ok){const a=await e.json();i(a)}}catch(e){}finally{o(!1)}};if(r)return a.jsx("div",{className:"quick-messages-bar loading",children:"Carregando..."});if(0===n.length)return a.jsx("div",{className:"quick-messages-bar empty",children:a.jsx("button",{className:"quick-message-manage-btn",onClick:t,title:"Gerenciar mensagens r√°pidas",children:"+ Adicionar mensagens r√°pidas"})});const m=l?n:n.slice(0,5);return a.jsx("div",{className:"quick-messages-bar",children:a.jsxs("div",{className:"quick-messages-list",children:[m.map(e=>a.jsxs("button",{className:"quick-message-btn",onClick:()=>{return a=e.text,void s({type:"text",content:a});var a},title:e.text,children:[e.emoji&&a.jsx("span",{className:"quick-message-emoji",children:e.emoji}),a.jsx("span",{className:"quick-message-text",children:e.text})]},e.id)),n.length>5&&a.jsx("button",{className:"quick-message-toggle-btn",onClick:()=>c(!l),title:l?"Mostrar menos":"Mostrar mais",children:l?"‚àí":"+"}),a.jsx("button",{className:"quick-message-manage-btn",onClick:t,title:"Gerenciar mensagens r√°pidas",children:"‚öôÔ∏è"})]})})}const y=window.location.origin,k=[{value:"general",label:"Geral"},{value:"greeting",label:"Sauda√ß√£o"},{value:"support",label:"Suporte"},{value:"question",label:"Pergunta"},{value:"closing",label:"Encerramento"}],M=["üëç","‚è∞","‚úÖ","ü§î","‚ú®","‚è≥","üë®‚Äçüíº","üí¨","üìù","üéØ","üí°","üöÄ","üìû","‚úîÔ∏è","‚ùå"];function H({onClose:s}){const[t,n]=e.useState([]),[i,r]=e.useState(!0),[o,l]=e.useState(null),[c,d]=e.useState({text:"",emoji:"",category:"general",shortcut:"",enabled:!0});e.useEffect(()=>{m()},[]);const m=async()=>{try{const e=await fetch(`${y}/api/quick-messages`);if(e.ok){const a=await e.json();n(a)}}catch(e){}finally{r(!1)}},u=()=>{l(null),d({text:"",emoji:"",category:"general",shortcut:"",enabled:!0})};return a.jsx("div",{className:"quick-messages-manager-overlay",children:a.jsxs("div",{className:"quick-messages-manager",children:[a.jsxs("div",{className:"manager-header",children:[a.jsx("h2",{children:"Gerenciar Mensagens R√°pidas"}),a.jsx("button",{className:"close-btn",onClick:s,children:"√ó"})]}),a.jsxs("div",{className:"manager-content",children:[a.jsxs("div",{className:"manager-form-section",children:[a.jsxs("h3",{children:[o?"Editar":"Nova"," Mensagem R√°pida"]}),a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.text.trim())try{const e=o?`${y}/api/quick-messages/${o}`:`${y}/api/quick-messages`,a=o?"PUT":"POST";(await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,order:t.length})})).ok?(await m(),u()):alert("Erro ao salvar mensagem r√°pida")}catch(a){alert("Erro ao salvar mensagem r√°pida")}else alert("O texto da mensagem √© obrigat√≥rio!")},children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Texto da Mensagem *"}),a.jsx("textarea",{value:c.text,onChange:e=>d({...c,text:e.target.value}),placeholder:"Ex: Obrigado! Estou aqui para ajudar.",rows:"3",required:!0})]}),a.jsx("div",{className:"form-row",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Emoji"}),a.jsxs("div",{className:"emoji-selector",children:[a.jsx("button",{type:"button",className:"emoji-clear-btn",onClick:()=>d({...c,emoji:""}),children:"Nenhum"}),M.map(e=>a.jsx("button",{type:"button",className:"emoji-option "+(c.emoji===e?"selected":""),onClick:()=>d({...c,emoji:e}),children:e},e))]})]})}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria"}),a.jsx("select",{value:c.category,onChange:e=>d({...c,category:e.target.value}),children:k.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Atalho (opcional)"}),a.jsx("input",{type:"text",value:c.shortcut,onChange:e=>d({...c,shortcut:e.target.value}),placeholder:"Ex: obg",maxLength:"10"})]})]}),a.jsxs("div",{className:"form-actions",children:[o&&a.jsx("button",{type:"button",className:"cancel-btn",onClick:u,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"save-btn",children:o?"Atualizar":"Adicionar"})]})]})]}),a.jsxs("div",{className:"manager-list-section",children:[a.jsxs("h3",{children:["Mensagens Cadastradas (",t.length,")"]}),i?a.jsx("p",{className:"loading-text",children:"Carregando..."}):0===t.length?a.jsx("p",{className:"empty-text",children:"Nenhuma mensagem r√°pida cadastrada."}):a.jsx("div",{className:"quick-messages-grid",children:t.map(e=>a.jsxs("div",{className:"quick-message-item "+(e.enabled?"":"disabled"),children:[a.jsxs("div",{className:"qm-header",children:[e.emoji&&a.jsx("span",{className:"qm-emoji",children:e.emoji}),a.jsx("span",{className:"qm-category",children:k.find(a=>a.value===e.category)?.label||e.category}),a.jsxs("label",{className:"qm-toggle",children:[a.jsx("input",{type:"checkbox",checked:e.enabled,onChange:()=>(async e=>{try{(await fetch(`${y}/api/quick-messages/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,enabled:!e.enabled})})).ok&&await m()}catch(a){}})(e)}),a.jsx("span",{className:"toggle-slider"})]})]}),a.jsx("p",{className:"qm-text",children:e.text}),e.shortcut&&a.jsxs("span",{className:"qm-shortcut",children:["/",e.shortcut]}),a.jsxs("div",{className:"qm-actions",children:[a.jsx("button",{className:"edit-btn",onClick:()=>(e=>{l(e.id),d({text:e.text,emoji:e.emoji||"",category:e.category||"general",shortcut:e.shortcut||"",enabled:e.enabled})})(e),children:"Editar"}),a.jsx("button",{className:"delete-btn",onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir esta mensagem r√°pida?"))try{(await fetch(`${y}/api/quick-messages/${e}`,{method:"DELETE"})).ok?await m():alert("Erro ao excluir mensagem r√°pida")}catch(a){alert("Erro ao excluir mensagem r√°pida")}})(e.id),children:"Excluir"})]})]},e.id))})]})]})]})})}function V({onClose:s}){const[t,n]=e.useState("");e.useEffect(()=>{const e=localStorage.getItem("agentName");e&&n(e)},[]);return a.jsx("div",{className:"signature-modal-overlay",onClick:s,children:a.jsxs("div",{className:"signature-modal-content",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"signature-modal-header",children:[a.jsx("h2",{children:"Nome do Atendente"}),a.jsx("button",{className:"signature-close-button",onClick:s,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})})]}),a.jsx("div",{className:"signature-modal-body",children:a.jsx("div",{className:"signature-form-full",children:a.jsxs("div",{className:"signature-form-group",children:[a.jsx("label",{children:"Nome que aparecer√° nas mensagens"}),a.jsx("input",{type:"text",placeholder:"Ex: Lucas - Atendimento Dr.Mac",value:t,onChange:e=>n(e.target.value),maxLength:50}),a.jsxs("span",{className:"signature-char-count",children:[t.length,"/50"]})]})})}),a.jsxs("div",{className:"signature-modal-footer",children:[a.jsx("button",{className:"signature-btn-cancel",onClick:s,children:"Cancelar"}),a.jsx("button",{className:"signature-btn-save",onClick:()=>{localStorage.setItem("agentName",t),s()},children:"Salvar"})]})]})})}function S({src:s,duration:t}){const n=e.useRef(null),[i,r]=e.useState(!1),[o,l]=e.useState(0),[c,d]=e.useState(t||0),[m,u]=e.useState(!0),[h,g]=e.useState(s),[x,v]=e.useState(!1);e.useEffect(()=>{const e=n.current;if(!e)return;const a=()=>{d(e.duration),u(!1)},s=()=>{l(e.currentTime)},t=()=>{r(!1),l(0)},i=()=>{u(!1)},o=a=>{u(!1),v(!0);const s=e.src;if(s.includes("audio/webm")){const e=s.replace("audio/webm","audio/ogg");g(e),v(!1)}else if(s.includes("audio/ogg")){const e=s.replace("audio/ogg","audio/mpeg");g(e),v(!1)}};return e.addEventListener("loadedmetadata",a),e.addEventListener("timeupdate",s),e.addEventListener("ended",t),e.addEventListener("canplay",i),e.addEventListener("error",o),()=>{e.removeEventListener("loadedmetadata",a),e.removeEventListener("timeupdate",s),e.removeEventListener("ended",t),e.removeEventListener("canplay",i),e.removeEventListener("error",o)}},[]);const j=e=>{if(!e||isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`},p=c?o/c*100:0;return a.jsxs("div",{className:`message-audio ${m?"audio-loading":""} ${i?"audio-playing":""} ${x?"audio-error":""}`,children:[a.jsx("audio",{ref:n,src:h,className:"audio-message-player",preload:"metadata"}),a.jsxs("div",{className:"custom-audio-player",children:[a.jsx("button",{className:"audio-play-btn",onClick:async()=>{const e=n.current;if(e)try{i?(e.pause(),r(!1)):(await e.play(),r(!0))}catch(a){r(!1),"NotSupportedError"===a.name?alert("‚ùå Formato de √°udio n√£o suportado pelo navegador.\n\nüí° Dica: Pe√ßa para converter o √°udio para MP3 no n8n antes de enviar."):"NotAllowedError"===a.name?alert("‚ö†Ô∏è O navegador bloqueou a reprodu√ß√£o autom√°tica.\n\nClique no bot√£o play novamente."):alert("N√£o foi poss√≠vel reproduzir o √°udio.\n\nErro: "+a.message)}},disabled:m,children:i?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),a.jsxs("div",{className:"audio-info",children:[a.jsx("div",{className:"audio-progress-container",onClick:e=>{const a=n.current;if(!a)return;const s=e.currentTarget.getBoundingClientRect(),t=(e.clientX-s.left)/s.width*c;a.currentTime=t,l(t)},children:a.jsx("div",{className:"audio-progress-bar",style:{width:`${p}%`}})}),a.jsxs("div",{className:"audio-time-info",children:[a.jsx("span",{className:"audio-current-time",children:j(o)}),a.jsx("span",{className:"audio-total-duration",children:j(c)})]})]}),x?a.jsx("a",{href:h,download:"audio.ogg",className:"audio-download-btn",title:"Download do √°udio",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"})})}):a.jsx("svg",{className:"audio-mic-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1 1.93c-3.94-.49-7-3.85-7-7.93h2c0 3.31 2.69 6 6 6s6-2.69 6-6h2c0 4.08-3.05 7.44-7 7.93V19h4v2H8v-2h4v-3.07z"})})]})]})}function A({labels:s,currentLabelId:t,onSelect:n,onManageLabels:i}){const[r,o]=e.useState(!1),l=e.useRef(null),c=s.find(e=>e.id===t);e.useEffect(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const d=e=>{n(e),o(!1)};return a.jsxs("div",{className:"label-selector",ref:l,children:[a.jsx("button",{className:"label-selector-trigger",onClick:()=>o(!r),title:"Etiqueta",children:c?a.jsx("span",{className:"current-label",style:{backgroundColor:c.color},children:c.name}):a.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:a.jsx("path",{fill:"currentColor",d:"M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z"})})}),r&&a.jsxs("div",{className:"label-selector-dropdown",children:[a.jsx("div",{className:"dropdown-header",children:"Etiquetas"}),t&&a.jsxs("button",{className:"label-option remove-label",onClick:()=>d(null),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})}),"Remover etiqueta"]}),0===s.length?a.jsx("div",{className:"no-labels",children:"Nenhuma etiqueta criada"}):s.map(e=>a.jsxs("button",{className:"label-option "+(e.id===t?"selected":""),onClick:()=>d(e.id),children:[a.jsx("span",{className:"label-color",style:{backgroundColor:e.color}}),a.jsx("span",{className:"label-name",children:e.name}),e.id===t&&a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"check-icon",children:a.jsx("path",{fill:"currentColor",d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})})]},e.id)),a.jsx("div",{className:"dropdown-divider"}),a.jsxs("button",{className:"label-option manage-labels",onClick:()=>{o(!1),i?.()},children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",children:a.jsx("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})}),"Gerenciar etiquetas"]})]})]})}const q=e.memo(function({src:s,alt:t}){const[n,i]=e.useState(!0),[r,o]=e.useState(!1),[l,c]=e.useState(s);return a.jsxs("div",{className:`message-file-image-container ${n?"image-loading":""} ${r?"image-error":""}`,children:[n&&a.jsx("div",{className:"image-loading-spinner",children:a.jsx("div",{className:"spinner"})}),r?a.jsxs("div",{className:"image-error-placeholder",onClick:()=>window.open(s,"_blank"),children:[a.jsxs("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"currentColor",children:[a.jsx("path",{d:"M21,19V5c0,-1.1 -0.9,-2 -2,-2H5c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2zM8.5,13.5l2.5,3.01L14.5,12l4.5,6H5l3.5,-4.5z"}),a.jsx("path",{d:"M12,2L12,2c5.52,0 10,4.48 10,10v0c0,5.52 -4.48,10 -10,10h0C6.48,22 2,17.52 2,12v0C2,6.48 6.48,2 12,2z",fill:"none",stroke:"currentColor",strokeWidth:"2"}),a.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor",strokeWidth:"2"}),a.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor",strokeWidth:"2"})]}),a.jsx("p",{children:"Erro ao carregar imagem"}),a.jsx("small",{children:"Clique para abrir em nova aba"})]}):a.jsx("img",{src:l,alt:t,className:"message-file-image",onClick:()=>{r||window.open(l,"_blank")},onLoad:()=>{i(!1),o(!1)},onError:()=>{i(!1),o(!0)},style:{display:n?"none":"block"}})]})}),E=e.memo(function({msg:e,agentName:s}){return a.jsxs("div",{className:"message "+(e.isBot?"bot":e.isAgent?"agent":"user"),children:[e.isAgent&&s&&a.jsx("div",{className:"agent-name-label",children:s}),a.jsxs("div",{className:"message-bubble",children:["audio"===e.type?a.jsx(S,{src:e.audioUrl||e.text,duration:e.duration}):"file"===e.type?a.jsx("div",{className:"message-file",children:"image"===e.fileCategory?a.jsx(q,{src:e.fileUrl||e.text,alt:e.fileName||"Imagem"}):a.jsxs("div",{className:"message-file-document",onClick:()=>window.open(e.fileUrl||e.text,"_blank"),children:[a.jsx("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:a.jsx("path",{fill:"currentColor",d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),a.jsxs("div",{className:"message-file-info",children:[a.jsx("span",{className:"message-file-name",children:e.fileName}),a.jsx("span",{className:"message-file-size",children:v(e.fileSize||0)})]}),a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:"message-file-download",children:a.jsx("path",{fill:"currentColor",d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"})})]})}):a.jsx("div",{className:"message-text",children:e.text}),a.jsxs("div",{className:"message-time",children:[g(e.timestamp),e.isAgent&&a.jsx("svg",{viewBox:"0 0 16 15",width:"16",height:"15",className:"message-check",children:a.jsx("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})})]})]})]})});const B=e.memo(function({conversation:s,onSendMessage:t,onLoadMoreMessages:n,socket:i,conversations:r,onSelectConversation:o,loadingConversation:l=!1,labels:d=[],onManageLabels:m,onLabelChange:u}){const[h,g]=e.useState(""),[x,v]=e.useState(!1),[j,p]=e.useState(!1),[f,C]=e.useState(!1),[y,k]=e.useState(!1),[M,S]=e.useState(!1),[q,B]=e.useState(!1),[z,P]=e.useState(""),I=e.useRef(null),T=e.useRef(null);e.useEffect(()=>{I.current?.scrollIntoView({behavior:"smooth"})},[s?.messages]),e.useEffect(()=>{const e=localStorage.getItem("agentName");e&&P(e)},[]),e.useEffect(()=>{s?.userId&&$()},[s?.userId]),e.useEffect(()=>{if(!i)return;const e=e=>{e.userId===s?.userId&&k(e.trava)};return i.on("trava-updated",e),()=>{i.off("trava-updated",e)}},[i,s?.userId]),e.useEffect(()=>{const e=T.current;if(!e||!n)return;const a=async()=>{if(e.scrollTop<100&&s?.hasMore&&!q){B(!0);const a=e.scrollHeight,s=e.scrollTop;await n()>0&&setTimeout(()=>{const t=e.scrollHeight-a;e.scrollTop=s+t},0),B(!1)}};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)},[s?.hasMore,s?.userId,q,n]);const $=e.useCallback(async()=>{if(s?.userId)try{const e=await fetch(`${c}/api/leads/${s.userId}/trava`),a=await e.json();k(a.trava)}catch(e){}},[s?.userId]),W=e.useCallback(async()=>{if(!M&&s?.userId){S(!0);try{const e=await fetch(`${c}/api/leads/${s.userId}/toggle-trava`,{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();k(a.trava)}catch(e){}finally{S(!1)}}},[M,s?.userId]),Z=e.useCallback(e=>{e.preventDefault(),h.trim()&&(t({type:"text",content:h}),g(""))},[h,t]),R=e.useCallback((e,a)=>{t({type:"audio",content:e,duration:a})},[t]),D=e.useCallback(e=>{t({type:"file",content:e.fileData,fileName:e.fileName,fileSize:e.fileSize,fileType:e.fileType,fileCategory:e.type})},[t]);return s?a.jsxs("div",{className:"chat-window",children:[a.jsxs("div",{className:"chat-header",children:[a.jsx("button",{className:"conversations-toggle-button",onClick:()=>C(!0),title:"Ver conversas",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})})}),a.jsxs("div",{className:"chat-header-info",children:[a.jsx("div",{className:"chat-avatar",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:a.jsx("path",{fill:"currentColor",d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"})})}),a.jsxs("div",{children:[a.jsx("h3",{children:s.userName}),a.jsxs("span",{className:"user-id",children:["ID: ",s.userId]})]})]}),a.jsxs("div",{className:"chat-header-actions",children:[a.jsx(A,{labels:d,currentLabelId:s.labelId,onSelect:e=>u?.(s.userId,e),onManageLabels:m}),a.jsx("button",{className:"icon-button trava-button "+(y?"travado":""),onClick:W,disabled:M,title:y?"Em espera (Agente pausado) - Clique para retomar":"Agente ativo - Clique para pausar e colocar em espera",children:y?a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"})}):a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"})})})]})]}),a.jsx("div",{className:"chat-messages",ref:T,children:a.jsxs("div",{className:"messages-container",children:[l?a.jsx("div",{className:"conversation-loading",children:a.jsx(b,{size:"medium",text:"Carregando conversa..."})}):null,q&&a.jsxs("div",{className:"loading-more-messages",children:[a.jsx(b,{size:"small"}),a.jsx("span",{children:"Carregando mensagens anteriores..."})]}),!l&&s?.messages?.map(e=>a.jsx(E,{msg:e,agentName:z},e.id)),a.jsx("div",{ref:I})]})}),a.jsx(L,{onSelectMessage:t,onManage:()=>v(!0)}),a.jsx("div",{className:"chat-input",children:a.jsxs("form",{onSubmit:Z,className:"input-container",children:[a.jsx("button",{type:"button",className:"icon-button",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M9.153 11.603c.795 0 1.439-.879 1.439-1.962s-.644-1.962-1.439-1.962-1.439.879-1.439 1.962.644 1.962 1.439 1.962zm-3.204 1.362c-.026-.307-.131 5.218 6.063 5.551 6.066-.25 6.066-5.551 6.066-5.551-6.078 1.416-12.129 0-12.129 0zm11.363 1.108s-.669 1.959-5.051 1.959c-3.505 0-5.388-1.164-5.607-1.959 0 0 5.912 1.055 10.658 0zM11.804 1.011C5.609 1.011.978 6.033.978 12.228s4.826 10.761 11.021 10.761S23.02 18.423 23.02 12.228c.001-6.195-5.021-11.217-11.216-11.217zM12 21.354c-5.273 0-9.381-3.886-9.381-9.159s3.942-9.548 9.215-9.548 9.548 4.275 9.548 9.548c-.001 5.272-4.109 9.159-9.382 9.159zm3.108-9.751c.795 0 1.439-.879 1.439-1.962s-.644-1.962-1.439-1.962-1.439.879-1.439 1.962.644 1.962 1.439 1.962z"})})}),a.jsx(w,{onSendFile:D}),a.jsx(N,{onSendAudio:R}),a.jsx("button",{type:"button",className:"icon-button",onClick:()=>p(!0),title:"Adicionar assinatura",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z"})})}),a.jsx("input",{type:"text",placeholder:"Digite uma mensagem",value:h,onChange:e=>g(e.target.value),className:"message-input"}),a.jsx("button",{type:"submit",className:"send-button",disabled:!h.trim(),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"})})})]})}),x&&a.jsx(H,{onClose:()=>v(!1)}),j&&a.jsx(V,{onClose:()=>{p(!1);const e=localStorage.getItem("agentName");e&&P(e)}}),f&&a.jsx("div",{className:"mobile-conversations-modal",onClick:()=>C(!1),children:a.jsxs("div",{className:"mobile-conversations-content",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"mobile-conversations-header",children:[a.jsx("h3",{children:"Conversas"}),a.jsx("button",{className:"close-conversations-button",onClick:()=>C(!1),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})})]}),a.jsx("div",{className:"mobile-conversations-list",children:r&&r.length>0?r.map(e=>a.jsxs("div",{className:"mobile-conversation-item "+(s?.userId===e.userId?"active":""),onClick:()=>{o(e),C(!1)},children:[a.jsx("div",{className:"mobile-conversation-avatar",children:e.userName?e.userName.charAt(0).toUpperCase():"?"}),a.jsxs("div",{className:"mobile-conversation-info",children:[a.jsxs("div",{className:"mobile-conversation-header",children:[a.jsx("span",{className:"mobile-conversation-name",children:e.userName||"Sem nome"}),e.unread>0&&a.jsx("span",{className:"mobile-unread-badge",children:e.unread})]}),a.jsx("p",{className:"mobile-conversation-preview",children:e.lastMessage||"Sem mensagens"})]})]},e.userId)):a.jsx("div",{className:"mobile-empty-conversations",children:a.jsx("p",{children:"Nenhuma conversa dispon√≠vel"})})})]})})]}):a.jsx("div",{className:"chat-window",children:a.jsx("div",{className:"chat-empty",children:a.jsxs("div",{className:"chat-empty-content",children:[a.jsxs("svg",{viewBox:"0 0 303 172",width:"360",height:"360",className:"empty-icon",children:[a.jsx("path",{fill:"var(--waveform-primary)",d:"M229.5 0C263.4 0 291 27.6 291 61.5V110.5C291 144.4 263.4 172 229.5 172H64.5C30.6 172 3 144.4 3 110.5V61.5C3 27.6 30.6 0 64.5 0H229.5Z"}),a.jsx("path",{fill:"var(--waveform-secondary)",d:"M229.5 5C260.5 5 286 30.5 286 61.5V110.5C286 141.5 260.5 167 229.5 167H64.5C33.5 167 8 141.5 8 110.5V61.5C8 30.5 33.5 5 64.5 5H229.5Z"})]}),a.jsx("h2",{children:"IA Conversa"}),a.jsx("p",{children:"Selecione uma conversa para visualizar as mensagens"})]})})})});export{c as A,p as C,b as L,B as a,x as f};
